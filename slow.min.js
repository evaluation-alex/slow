function bpm_to_ms(a){var b=Math.abs(a/60)||1;return parseInt(1e3/b)}function make_verbose(a,b){return b.map(function(b,c){return{input:a[c],result:b}})}function my_function(a,b){var c=Math.floor(4e3*Math.random());setTimeout(function(){b("finished "+a+" in "+c+"ms")},c)}var arr=[1,2,3,4,5,6,7,8,9,10];exports.pace=function(a,b,c,d){function j(){return e>=a.length-1?0!=g&&i>h?(c.debug&&console.log("waiting for danglers"),h++,void 0):(clearInterval(k),c.verbose&&(f=make_verbose(f)),d(f)):g>=c.max?(c.debug&&console.log("whoa fella"),void 0):(e+=1,g+=1,function(){var d=e;c.debug&&console.log("sending# "+d+", "+g+" going at once"),b(a[e],function(a){g-=1,f[d]=a})}(),void 0)}this.aliases=["rate","speed"],this.doc="explicitly decide the speed, with an optional maximum limit for safety","function"==typeof c&&(d=c,c={}),d=d||console.log,c=c||{},c.rate=c.rate||c.speed||c.pace||c.bpm||60,c.max=c.max||5,c.debug=c.debug||!1,c.verbose=c.verbose||!1,"function"!=typeof c.monitor&&(c.monitor=!1),"string"==typeof c.rate&&(c.rate.match(/bpm$/i)?c.rate=parseInt(c.rate.replace(/bpm/i,""))||60:c.rate.match(/he?rtz$/i)?(c.rate=parseInt(c.rate.replace(/he?r?t?z$/i,"")),c.rate=Math.abs(60*c.rate)||60):c.rate.match(/ms$/i)&&(c.rate=parseInt(c.rate.replace(/ms$/i,"")),c.rate=Math.abs(c.rate/60)||60),c.rate=parseInt(c.rate));var e=-1,f=[],g=0,h=0,i=a.length/2;5>i&&(i=10),c.rate=bpm_to_ms(c.rate);var k=setInterval(j,c.rate)},exports.heartbeat=function(a,b,c,d){c=c||{},c.rate=c.rate||"72bpm",exports.pace(a,b,c,d)},exports.walk=function(a,b,c,d){c=c||{},c.rate=c.rate||"120bpm",exports.pace(a,b,c,d)},exports.run=function(a,b,c,d){c=c||{},c.rate=c.rate||"180bpm",exports.pace(a,b,c,d)},exports.jog=function(a,b,c,d){c=c||{},c.rate=c.rate||"150bpm",exports.pace(a,b,c,d)},exports.steady=function(a,b,c,d){function h(){(function(){e++;var i=e;g++,c.debug&&console.log("sending #"+e+", "+g+" going at once"),b(a[e],function(b){return c.monitor&&c.monitor(b),g-=1,f[i]=b,a.length-1>e?(h(),void 0):(0>=g&&(c.verbose&&(f=make_verbose(a,f)),d(f)),void 0)})})()}this.doc="keep a steady amount of things going at once",this.aliases=["flow","waterfall","steadfast"];var e=-1,f=[],g=0;"function"==typeof c&&(d=c,c={}),c=c||{},c.max=Math.abs(c.max)||5,c.verbose=c.verbose||!1,c.debug=c.debug||!1,"function"!=typeof c.monitor&&(c.monitor=!1);for(var i=0;c.max>i&&a.length>i;i++)h()},exports.patient=function(a,b,c,d){c=c||{},c.max=c.max||1,exports.steady(a,b,c,d)},exports.handful=function(a,b,c,d){c=c||{},c.max=c.max||3,exports.steady(a,b,c,d)},exports.pocket=function(a,b,c,d){c=c||{},c.max=c.max||7,exports.steady(a,b,c,d)},exports.backpack=function(a,b,c,d){c=c||{},c.max=c.max||15,exports.steady(a,b,c,d)},exports.shovel=function(a,b,c,d){c=c||{},c.max=c.max||35,exports.steady(a,b,c,d)};